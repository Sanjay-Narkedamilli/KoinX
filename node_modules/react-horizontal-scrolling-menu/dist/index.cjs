!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);const r="react-horizontal-scrolling-menu",s="-separator",i=`${r}-${s}`,l=`${r}--item`,a=`${r}--scroll-container`,u=`${r}--wrapper`,d=`${r}--inner-wrapper`,c=`${r}--header`,f=`${r}--arrow-left`,h=`${r}--arrow-right`,v=`${r}--footer`,m="itemId",p="data-key",b="data-index",g={first:"first",last:"last",onInit:"onInit",onUpdate:"onUpdate"};var y=Object.freeze({__proto__:null,rootClassName:r,separatorString:s,separatorClassName:i,itemClassName:l,scrollContainerClassName:a,wrapperClassName:u,innerWrapperClassName:d,headerClassName:c,arrowLeftClassName:f,arrowRightClassName:h,footerClassName:v,id:m,dataKeyAttribute:p,dataIndexAttribute:b,events:g});function w({className:e="",children:t,onScroll:n=(()=>{}),scrollRef:r}){const s=o.default.useMemo((()=>`${a} ${e}`),[e]);return o.default.createElement("div",{className:s,onScroll:n,ref:r},t)}var E=o.default.memo((function({className:e,id:t,index:n,refs:r}){const s=o.default.useRef(null);return r[n]=s,o.default.createElement("div",{className:e,[p]:t,[b]:n,ref:s})}));var I=o.default.memo((function({children:e,className:t,id:n,index:r,refs:s}){const i=o.default.useRef(null);return s[String(r)]=i,o.default.createElement("div",{className:t,[p]:n,[b]:r,ref:i},e)}));const M=e=>"object"==typeof e&&null!=e&&1===e.nodeType,C=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,x=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return C(n.overflowY,t)||C(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},N=(e,t,n,o,r,s,i,l)=>s<e&&i>t||s>e&&i<t?0:s<=e&&l<=n||i>=t&&l>=n?s-e-o:i>t&&l<n||s<e&&l>n?i-t+r:0,S=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},k=(e,t)=>{var n,o,r,s;if("undefined"==typeof document)return[];const{scrollMode:i,block:l,inline:a,boundary:u,skipOverflowHiddenElements:d}=t,c="function"==typeof u?u:e=>e!==u;if(!M(e))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,h=[];let v=e;for(;M(v)&&c(v);){if(v=S(v),v===f){h.push(v);break}null!=v&&v===document.body&&x(v)&&!x(document.documentElement)||null!=v&&x(v,d)&&h.push(v)}const m=null!=(o=null==(n=window.visualViewport)?void 0:n.width)?o:innerWidth,p=null!=(s=null==(r=window.visualViewport)?void 0:r.height)?s:innerHeight,{scrollX:b,scrollY:g}=window,{height:y,width:w,top:E,right:I,bottom:C,left:k}=e.getBoundingClientRect(),{top:$,right:R,bottom:W,left:T}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let j="start"===l||"nearest"===l?E-$:"end"===l?C+W:E+y/2-$+W,B="center"===a?k+w/2-T+R:"end"===a?I+R:k-T;const O=[];for(let e=0;e<h.length;e++){const t=h[e],{height:n,width:o,top:r,right:s,bottom:u,left:d}=t.getBoundingClientRect();if("if-needed"===i&&E>=0&&k>=0&&C<=p&&I<=m&&E>=r&&C<=u&&k>=d&&I<=s)return O;const c=getComputedStyle(t),v=parseInt(c.borderLeftWidth,10),M=parseInt(c.borderTopWidth,10),x=parseInt(c.borderRightWidth,10),S=parseInt(c.borderBottomWidth,10);let $=0,R=0;const W="offsetWidth"in t?t.offsetWidth-t.clientWidth-v-x:0,T="offsetHeight"in t?t.offsetHeight-t.clientHeight-M-S:0,V="offsetWidth"in t?0===t.offsetWidth?0:o/t.offsetWidth:0,H="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(f===t)$="start"===l?j:"end"===l?j-p:"nearest"===l?N(g,g+p,p,M,S,g+j,g+j+y,y):j-p/2,R="start"===a?B:"center"===a?B-m/2:"end"===a?B-m:N(b,b+m,m,v,x,b+B,b+B+w,w),$=Math.max(0,$+g),R=Math.max(0,R+b);else{$="start"===l?j-r-M:"end"===l?j-u+S+T:"nearest"===l?N(r,u,n,M,S+T,j,j+y,y):j-(r+n/2)+T/2,R="start"===a?B-d-v:"center"===a?B-(d+o/2)+W/2:"end"===a?B-s+x+W:N(d,s,o,v,x+W,B,B+w,w);const{scrollLeft:e,scrollTop:i}=t;$=0===H?0:Math.max(0,Math.min(i+$/H,t.scrollHeight-n/H+T)),R=0===V?0:Math.max(0,Math.min(e+R/V,t.scrollWidth-o/V+W)),j+=i-$,B+=e-R}O.push({el:t,top:$,left:R})}return O};function $(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(k(e,t));const o="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:r,top:s,left:i}of k(e,(e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"})(t))){const e=s-n.top+n.bottom,t=i-n.left+n.right;r.scroll({top:e,left:t,behavior:o})}}let R;const W=()=>(R||(R="performance"in window?performance.now.bind(performance):Date.now),R());function T(e){const t=W(),n=Math.min((t-e.startTime)/e.duration,1),o=e.ease(n),r=e.startX+(e.x-e.startX)*o,s=e.startY+(e.y-e.startY)*o;e.method(r,s,n,o),r!==e.x||s!==e.y?requestAnimationFrame((()=>T(e))):e.cb()}function j(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>1+--e*e*e*e*e,s=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;const l=e,a=e.scrollLeft,u=e.scrollTop;T({scrollable:l,method:(t,n,o,r)=>{const s=Math.ceil(t),l=Math.ceil(n);e.scrollLeft=s,e.scrollTop=l,null==i||i({target:e,elapsed:o,value:r,left:s,top:l})},startTime:W(),startX:a,startY:u,x:t,y:n,duration:o,ease:r,cb:s})}const B=function(e,t){const n=t||{};return(e=>e&&!e.behavior||"smooth"===e.behavior)(n)?$(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,skipOverflowHiddenElements:n.skipOverflowHiddenElements,behavior:e=>Promise.all(e.reduce(((e,t)=>{let{el:o,left:r,top:s}=t;const i=o.scrollLeft,l=o.scrollTop;return i===r&&l===s?e:[...e,new Promise((e=>j(o,r,s,n.duration,n.ease,(()=>e({el:o,left:[i,r],top:[l,s]})),n.onScrollChange)))]}),[]))}):Promise.resolve($(e,t))},O=e=>Object.values(e).map((e=>e.current)).filter(Boolean);function V(e,t,n,o,r,s){var i;const l=(null===(i=null==e?void 0:e.entry)||void 0===i?void 0:i.target)||e;if(!l)return;const a={behavior:t||"smooth",inline:n||"end",block:o||"nearest"};return s?l.scrollIntoView(a):B(l,Object.assign(Object.assign({},r),a))}const H=e=>document.querySelector(`[${p}='${e}']`),U=e=>document.querySelector(`[${b}='${e}']`);function A(e){return o.default.isValidElement(e)&&e||"function"==typeof e&&o.default.createElement(e,null)||!!e&&"object"==typeof e&&o.default.createElement(e,null)||null}const L=e=>e.filter((e=>!new RegExp(`.*${s}$`).test(e))),P=e=>{var t;return String((null===(t=null==e?void 0:e.props)||void 0===t?void 0:t[m])||String((null==e?void 0:e.key)||"").replace(/^\.\$/,""))};function F({children:e,itemClassName:t="",refs:n,separatorClassName:r=""}){const a=o.default.Children.toArray(e).filter(Boolean),u=a.length,d=o.default.useMemo((()=>`${l} ${t}`),[t]),c=o.default.useMemo((()=>`${i} ${r}`),[r]);return o.default.createElement(o.default.Fragment,null,a.map(((e,t)=>{const r=P(e),i="menuItem__"+r,l=r+s,a=t+1===u;return[o.default.createElement(I,{className:d,id:r,key:i,refs:n,index:t},e),!a&&o.default.createElement(E,{className:c,id:l,refs:n,key:l,index:t+.1})]})))}const _="undefined"!=typeof window?o.default.useLayoutEffect:o.default.useEffect;function D({items:e,itemsChanged:t,refs:n,options:r}){const s=o.default.useRef(),i=o.default.useCallback((t=>{e.setBatch(function(e,t){return[...e].map((e=>{var n,o,r,s;const i=e.target,l=String(null!==(o=null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.key)&&void 0!==o?o:"");return[l,{index:String(null!==(s=null===(r=null==i?void 0:i.dataset)||void 0===r?void 0:r.index)&&void 0!==s?s:""),key:l,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,r))}),[e,r]);_((()=>{const e=O(n),t=s.current||new IntersectionObserver(i,r);return s.current=t,e.forEach((e=>t.observe(e))),()=>{t.disconnect(),s.current=void 0}}),[i,t,r,n])}const X=e=>o.default.Children.toArray(e).map(P).filter(Boolean);class Y{constructor(){this.subscribe=(e,t)=>{this.observers.set(e,(this.observers.get(e)||[]).concat(t))},this.unsubscribe=(e,t)=>{const n=(this.observers.get(e)||[]).filter((e=>e!==t));n.length?this.observers.set(e,n):this.observers.delete(e)},this.emitUpdates=(e,t)=>{const n=this.observers.get(e)||[];null==n||n.forEach((e=>null==e?void 0:e(t)))},this.updateBatch=(e,t=!0)=>{e.length&&(e.forEach((([e,t])=>this.emitUpdates(e,t))),t&&this.emitUpdates(g.onUpdate))},this.update=(e,t)=>{this.emitUpdates(e,t),this.emitUpdates(g.onUpdate)},this.observers=new Map}}class q extends Map{constructor(){super(),this.subscribe=(e,t)=>this.observer.subscribe(e,t),this.unsubscribe=(e,t)=>this.observer.unsubscribe(e,t),this.isEdgeItem=({key:e,value:t,first:n=this.first(),last:o=this.last()})=>{const r=[];return e===(null==n?void 0:n.key)?r.push([g.first,t]):e===(null==o?void 0:o.key)&&r.push([g.last,t]),r},this.edgeItemsCheck=e=>{const t=this.first(),n=this.last(),o=e.find((([e])=>e===(null==t?void 0:t.key))),r=[];o&&r.push([g.first,o[1]]);const s=e.find((([e])=>e===(null==n?void 0:n.key)));return s&&r.push([g.last,s[1]]),r},this.toArr=()=>this.sort([...this]),this.toItems=()=>this.toArr().map((([e])=>e)),this.toItemsWithoutSeparators=()=>L(this.toItems()),this.sort=e=>e.sort((([,e],[,t])=>+e.index-+t.index)),this.set=(e,t)=>{const n=String(e),o=[[n,t]];return super.set(n,t),o.push(...this.isEdgeItem({key:n,value:t,first:this.first(),last:this.last()})),this.observer.updateBatch(o),this},this.setBatch=e=>{this.firstRun&&this.observer.update(g.onInit);const t=[...e];return this.sort(t).forEach((([e,t])=>{super.set(String(e),t)})),t.push(...this.edgeItemsCheck(t)),this.observer.updateBatch(t,!this.firstRun),this.firstRun=!1,this},this.first=()=>{var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]},this.last=()=>{var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]},this.filter=e=>this.toArr().filter(e),this.find=e=>this.toArr().find(e),this.findIndex=e=>this.toArr().findIndex(e),this.getCurrentPos=(e,t)=>{const n=this.toArr().filter((e=>{var n;return t?!(null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.includes(s)):e})),o=n.findIndex((([t,n])=>t===e||n===e));return[n,o]},this.prev=(e,t)=>{var n;const[o,r]=this.getCurrentPos(e,!!t);return-1!==r?null===(n=o[r-1])||void 0===n?void 0:n[1]:void 0},this.next=(e,t)=>{var n;const[o,r]=this.getCurrentPos(e,!!t);return-1!==r?null===(n=o[r+1])||void 0===n?void 0:n[1]:void 0},this.getVisible=()=>this.filter((e=>e[1].visible)),this.getVisibleElements=()=>this.filter((e=>!e[0].includes(s)&&e[1].visible)),this.observer=new Y,this.firstRun=!0}}const z={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95]},K=o.default.createContext({}),G=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}${s}`)),[]).slice(0,-1);const J={current:{}},Q=()=>{};e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,Header:r,Footer:i,transitionDuration:l=500,transitionBehavior:a,onInit:m=Q,onUpdate:p=Q,onMouseDown:b,onMouseUp:y,onMouseMove:E,onScroll:I=Q,onTouchMove:M,onTouchStart:C,onTouchEnd:x,onWheel:N=Q,options:S=z,scrollContainerClassName:k="",itemClassName:$="",separatorClassName:R="",wrapperClassName:W="",apiRef:T=J,RTL:j,noPolyfill:B}){const O=A(e),L=A(t),P=A(r),_=A(i),Y=o.default.useRef(null),[G]=o.default.useState({}),Z=o.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},z),S),{root:Y.current})),[S]),ee=o.default.useRef(new q).current,te=function(e,t){const[n,r]=o.default.useState(""),i=o.default.useMemo((()=>X(e)),[e]);return o.default.useEffect((()=>{const e=i.filter(Boolean).join("");t.toItemsWithoutSeparators().filter((e=>!i.includes(e))).forEach((e=>{var n,o;const r=(null===(n=t.last())||void 0===n?void 0:n.key)===e&&(null===(o=t.prev(e))||void 0===o?void 0:o.key)||"";t.delete(r),t.delete(`${e}${s}`),t.delete(e)})),r(e)}),[i,t]),n}(n,ee);D(o.default.useMemo((()=>({items:ee,itemsChanged:te,options:Z,refs:G})),[ee,te,G,Z]));const ne=o.default.useMemo((()=>function(e,t,n){var r,s,i;const l=!!(null===(r=e.first())||void 0===r?void 0:r.visible),a=!!(null===(s=e.last())||void 0===s?void 0:s.visible),u=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},d=()=>{var t,n;const o=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1];return o?e.prev(o):void 0},c=()=>{var t;const n=null===(t=e.getVisible().findLast((()=>!0)))||void 0===t?void 0:t[1];return n?e.next(n):void 0},f=null===(i=null==t?void 0:t.boundary)||void 0===i?void 0:i.current;return{getItemById:u,getItemElementById:H,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:U,getNextItem:c,getNextElement:()=>{var t;const n=null===(t=e.getVisibleElements().findLast((()=>!0)))||void 0===t?void 0:t[1];return n?e.next(n,!0):void 0},getPrevItem:d,getPrevElement:()=>{var t,n;const o=null===(n=null===(t=e.getVisibleElements())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1];return o?e.prev(o,!0):void 0},isFirstItemVisible:l,isItemVisible:t=>e.getVisibleElements().map((e=>e[0])).includes(String(t)),isLastItem:t=>e.last()===u(t),isLastItemVisible:a,scrollNext:(e,o,r,{duration:s,boundary:i=f}={})=>{const l=null!=e?e:null==t?void 0:t.behavior;return V(c(),l,o||"start",r||"nearest",{boundary:i,duration:null!=s?s:null==t?void 0:t.duration},n)},scrollPrev:(e,o,r,{duration:s,boundary:i=f}={})=>{const l=null!=e?e:null==t?void 0:t.behavior;return V(d(),l,o||"end",r||"nearest",{boundary:i,duration:null!=s?s:null==t?void 0:t.duration},n)},useIsVisible:(t,n=!1)=>{const[r,s]=o.default.useState(n);return o.default.useEffect((()=>{const n=e=>{s(!!(null==e?void 0:e.visible))};return e.subscribe(t,n),()=>{e.unsubscribe(t,n)}}),[t]),r},scrollToItem:(e,o,r,s,i)=>{var l;return V(e,null!=o?o:null==t?void 0:t.behavior,r,s,Object.assign(Object.assign({boundary:f},i),{duration:null!==(l=null==i?void 0:i.duration)&&void 0!==l?l:null==t?void 0:t.duration}),n)}}}(ee,{duration:l,behavior:a,boundary:Y},B)),[ee,l,a,B]),oe=o.default.useCallback((()=>Object.assign(Object.assign({},ne),{items:ee,scrollContainer:Y})),[ne,ee,Y]),[re,se]=o.default.useState((()=>oe()));(({context:e,onInit:t,onUpdate:n})=>{o.default.useEffect((()=>{const o=()=>t(e),r=()=>n(e);return e.items.subscribe(g.onInit,o),e.items.subscribe(g.onUpdate,r),()=>{e.items.unsubscribe(g.onInit,o),e.items.unsubscribe(g.onUpdate,r)}}),[e,t,n])})({context:re,onInit:m,onUpdate:p}),o.default.useEffect((()=>se(oe())),[oe]),T.current=re;const ie=o.default.useCallback((e=>I(re,e)),[I,re]),le=o.default.useCallback((e=>N(re,e)),[N,re]),ae=o.default.useMemo((()=>`${u} ${W}`),[W]),ue=o.default.useMemo((()=>`${k}${j?" rtl":""}`),[j,k]);return o.default.createElement("div",{className:ae,onWheel:le,onMouseDown:null==b?void 0:b(re),onMouseUp:null==y?void 0:y(re),onMouseMove:null==E?void 0:E(re),onTouchStart:null==C?void 0:C(re),onTouchMove:null==M?void 0:M(re),onTouchEnd:null==x?void 0:x(re)},o.default.createElement(K.Provider,{value:re},o.default.createElement("div",{className:c},P),o.default.createElement("div",{className:d},o.default.createElement("div",{className:f},O),o.default.createElement(w,{className:ue,onScroll:ie,scrollRef:Y},o.default.createElement(F,{refs:G,itemClassName:$,separatorClassName:R},n)),o.default.createElement("div",{className:h},L)),o.default.createElement("div",{className:v},_)))},e.VisibilityContext=K,e.constants=y,e.getItemsPos=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const o=0===t,r=t===n.length-1,i=new RegExp(s).test(e);return!((o||r)&&i)})))(e),o=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:o,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){const n=L(e),o=L(t);return{prev:()=>G(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),o=t.length,r=n-o,s=r<0,i=s?0:r,l=e.slice(i,s?o:n);return l.length===o?l:e.slice(n,o)}(n,o)),next:()=>G(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),o=t.length,r=n+o+1,s=r>e.length-1,i=s?e.length-1:r,l=e.slice(s?i-o+1:n+1,i);return l.length===o?l:e.slice(e.length-o,e.length+o)}(n,o))}},Object.defineProperty(e,"__esModule",{value:!0})}));
